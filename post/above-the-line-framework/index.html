<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academia 4.3.1"><meta name=generator content="Hugo 0.97.3"><meta name=author content="Cedric Kienzler"><meta name=description content="Introduction into the &#34;Above-the-line / Below-the-line&#34; framework and why you look at your systems design mostly wrong."><link rel=alternate hreflang=en-us href=https://cedi.dev/post/above-the-line-framework/><meta name=theme-color content="hsl(339, 90%, 68%)"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.6.0/css/all.css integrity=sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css crossorigin=anonymous title=hl-dark disabled><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:400,700|Open+Sans|Roboto+Mono&display=swap"><link rel=stylesheet href=/css/academia.min.dbe83bbf6477781bec4f66e695a12d6d.css><link rel=manifest href=/site.webmanifest><link rel=icon type=image/png href=/img/icon.png><link rel=apple-touch-icon type=image/png href=/img/icon-192.png><link rel=canonical href=https://cedi.dev/post/above-the-line-framework/><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@c3di1"><meta property="twitter:creator" content="@c3di1"><meta property="og:site_name" content="cedi.dev"><meta property="og:url" content="https://cedi.dev/post/above-the-line-framework/"><meta property="og:title" content="Above-the-line / Below-the-line framework | cedi.dev"><meta property="og:description" content="Introduction into the &#34;Above-the-line / Below-the-line&#34; framework and why you look at your systems design mostly wrong."><meta property="og:image" content="https://cedi.dev/img/icon-192.png"><meta property="twitter:image" content="https://cedi.dev/img/icon-192.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2022-04-24T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-24T18:50:40+02:00"><title>Above-the-line / Below-the-line framework | cedi.dev</title></head><body id=top data-spy=scroll data-target=#TableOfContents data-offset=71 class=dark><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off role=textbox spellcheck=false type=search></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id=navbar-main><div class=container><a class=navbar-brand href=/>cedi.dev</a>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar aria-controls=navbar aria-expanded=false aria-label="Toggle navigation"><span><i class="fas fa-bars"></i></span></button><div class="collapse navbar-collapse" id=navbar><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#hero><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#skills><span>Skills</span></a></li><li class=nav-item><a class=nav-link href=/#accomplishments><span>Accomplishments</span></a></li><li class=nav-item><a class=nav-link href=/#posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/#featured><span>Publications</span></a></li><li class=nav-item><a class=nav-link href=/#experience><span>Experience</span></a></li><li class=nav-item><a class="nav-link js-search" href=#><i class="fas fa-search" aria-hidden=true></i></a></li><li class=nav-item><a class="nav-link js-dark-toggle" href=#><i class="fas fa-moon" aria-hidden=true></i></a></li></ul></div></div></nav><article class="article py-5" itemscope itemtype=http://schema.org/Article><div class="article-container py-3"><h1 itemprop=name>Above-the-line / Below-the-line framework</h1><p class=page-subtitle>A different view on your systems design</p><meta content="2022-04-24 00:00:00 +0000 UTC" itemprop=datePublished><meta content="2022-04-24 18:50:40 +0200 +0200" itemprop=dateModified><div class=article-metadata><div><span itemprop="author name" itemtype=http://schema.org/Person><a href=/authors/cedi/>Cedric Kienzler</a></span></div><span class=article-date>Last updated on
<time>Apr 24, 2022</time></span>
<span class=middot-divider></span>
<span class=article-categories><i class="fas fa-folder"></i>
<a href=/categories/sre/>SRE</a></span><div class=share-box aria-hidden=true><ul class=share><li><a href="https://twitter.com/intent/tweet?url=https://cedi.dev/post/above-the-line-framework/&text=Above-the-line%20/%20Below-the-line%20framework" target=_blank rel=noopener class=share-btn-twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=https://cedi.dev/post/above-the-line-framework/&t=Above-the-line%20/%20Below-the-line%20framework" target=_blank rel=noopener class=share-btn-facebook><i class="fab fa-facebook-f"></i></a></li><li><a href="mailto:?subject=Above-the-line%20/%20Below-the-line%20framework&body=https://cedi.dev/post/above-the-line-framework/" target=_blank rel=noopener class=share-btn-email><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=https://cedi.dev/post/above-the-line-framework/&title=Above-the-line%20/%20Below-the-line%20framework" target=_blank rel=noopener class=share-btn-linkedin><i class="fab fa-linkedin-in"></i></a></li><li><a href="https://web.whatsapp.com/send?text=Above-the-line%20/%20Below-the-line%20framework%20https://cedi.dev/post/above-the-line-framework/" target=_blank rel=noopener class=share-btn-whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://service.weibo.com/share/share.php?url=https://cedi.dev/post/above-the-line-framework/&title=Above-the-line%20/%20Below-the-line%20framework" target=_blank rel=noopener class=share-btn-weibo><i class="fab fa-weibo"></i></a></li></ul></div></div></div></div></div><div class=article-container><div class=article-style itemprop=articleBody><h2 id=introduction>Introduction</h2><p>Welcome back to my blog!</p><p>In this article I want to challenge how you think about your systems design.
The above-the-line / below-the-line framework might appear weird at first, since it is introducing some level of abstraction between you and the system, but I hope while reading trough the article and reflecting on it, you come to terms with the framework.
If you accept it, it will allow you to write better documentation, communicate better about a system architecture, and come up with better monitoring for it.</p><p>I hope you will find this article helpful! If you do - please consider sharing it to your co-workers and friends!</p><h2 id=modelling-a-system>Modelling a system</h2><p>When you are performing any kind of systems-design, you will produce diagrams such as the one below. I would argue, most readers of this are familiar with some sort or another of such diagrams and use them almost daily as part of their job.
A typical systems consists of software components running on various servers and clusters behind layers of load balancers and routers, using databases running in close proximity to the application, connecting to 3rd party APIs over the internet, and presenting results to other systems or users.
<img src=images/system.png alt=system></p><p>And there is absolutely nothing wrong with this systems design overview. Except maybe that it is on a very high level.</p><p>But you need some amount of supporting infrastructure in order to run your designed system. Maybe you&rsquo;re depending on a cloud-provider, but most certainly your application code and pipeline definitions exists in repositories. Pipelines are executed by pipeline runners on some other infrastructure. You have additional deployment tools, helper scripts, and so on.</p><p>For simplicity let’s focus on the least amount of supporting infrastructure needed: Version Control Servers, Testing Tools, Pipelines, and issue-trackers.
I think we quickly end up with something like this:
<img src=images/overview.png alt=overview></p><p>Yay - now we successfully managed to map out the most important parts of our system. We have the system itself as well as the supporting infrastructure.</p><p>Looks good, right?</p><h2 id=interacting-with-a-system>Interacting with a system</h2><p>Now let’s have a look at the different individuals involved in building, supporting, and using the system. These are the developers, SREs, QA engineers, and program managers.</p><p>They all have different backgrounds and might have different intentions when interacting with the system. While the PMs want to push for new features, QA might push for fewer bugs and the SREs might push for higher reliability and resiliency.</p><p>But how exactly are they going to interact with the system?</p><p>We experience this every day in our jobs. The developers will write code that they push to the repositories in our VCS based on feature-requests of but-tickets in the ticket-system, the SREs will observe the systems state via the monitoring tools to inform decisions about improving reliability, DevOps might improve upon the CI/CD pipelines by editing the YAML files which they push to the VCS for the pipeline-system to pick them up. The QA engineers use the web-frontend of the deployment tool to kick-off a pipeline run deploying to a test-environment, perform their tests using a vast inventory of testing tools and test descriptions. And then there are our PMs who will write JIRA-Tickets to request new features.</p><p>Sounds familiar, doesn&rsquo;t it?
<img src=images/people.png alt=people></p><p>And everyone working in this area knows that there is a problem. The great disconnect between QA who thinks the developers can&rsquo;t write bug-free code, the PMs who think the SREs are unreasonable to push back on a release on a Friday evening because the error budget is exhausted for the month … .</p><p>After all, everyone here knows this meme and to some extend relate to it, am I right?:
<img src=images/meme.jpg alt="how project managers, developers, qa, sysadmin, designers see each other"></p><p>But why is that?</p><p>Because everyone understands the system differently. Everyone has a different mental-model of how the system works. And how it will fail.
No one has a complete understanding of the system.
No one knows exactly how it will fail.
Everyone has different experiences with how the system failed in the past, or how similar systems failed in the past.
This lays in the very nature of every only so slightly complex system. And systems in the area of computer-systems are always complex ones.</p><p><img src=images/mentalmodels.png alt="mental models"></p><h2 id=the-_above-the-line--below-the-line_-framework>The <em>above the line / below the line</em> framework</h2><p>After looking at a system itself and the different people interacting with a system, it is time to combine the two into one model and call with the above the line / below the line framework.</p><p>We call it that, because we draw a line and put the people interacting with the system and their different mental models and intentions above this line and our beloved complex system below this line.</p><p><img src=images/above-the-line-below-the-line.png alt=above-the-line/below-the-line></p><p>We call this (green) line the <em>line of representation</em>, because whenever we interact with our system, we interact with a representation of our system.</p><p>The consequence of this framework is, that everything &ldquo;below the line&rdquo; is interfered from the mental models of the individuals and therefore that the system itself does not exist in the physical world.
We cannot see, touch, or directly control our system.
The only way we can interact with our system is trough the representation layer.</p><p>I think unconsciously we know this already.</p><p>Why else would we rely on &ldquo;infrastructure as code&rdquo;? And why else would we rather commit our CI/CD Pipeline definition and configurations as YAML files than using a bulky UI (looking at you Jenkins)?
We choose a representation that is familiar to us to define our systems state to make it easier to work with.
It is easier for us to inform our mental model based on a known representation. And the other way round, it is easy to translate our mental-model into a representation that is familiar to us.</p><p>One very important consequence of this model is, that every time someone makes any change to a system, the change is based on the persons mental model of the system at a certain point in time.</p><p>But the data which informs our mental model becomes stale very quickly.
We know that code and configuration changes over time. The same is true for the requirements of our system.
Even the hardware on which system is running changes over time and become less reliable because of bit-rot, degrading optical transceivers, or other variables.
And finally 3rd party application behavior changes over time thanks to updates, causing a change in the access pattern of your drives or how it uses the network.</p><p>We have to accept and live with a constantly changing system.</p><p>Every time a system surprises us, that is because our mental model is flawed and or information became stale.</p><h2 id=challenges>Challenges</h2><p>We can&rsquo;t talk about this framework without talking about challenges that arise as a consequence of this system.</p><p>I think the most important two are</p><ol><li>Every individual working with a system must develop and maintain a good-enough mental model of the system.</li><li>Every individual working with a system must develop and maintain a good-enough understanding of other individuals mental-models of the system.</li></ol><p>For new-hires we have the Onboarding-phase in which a new-hire is expected to learn everything about the system. During this phase we build our initial mental-model of the system.</p><p>For everyone else we have knowledge-sharing-sessions or something like that.
We have architecture-deep-dive sessions with our peers, or conduct systems-design meetings when planning for big-changes.
And finally we review each-others merge requests.</p><p>We don&rsquo;t do all this for the sake of spotting someone else’s mistake.</p><p>Instead we validate each others assumptions about how the system behaves and therefore refine each-others mental-models about the system.</p><p>What might appears to us as a &ldquo;design-flaw&rdquo; or &ldquo;error&rdquo; in someone else’s design or code-change might not be because they &ldquo;did a mistake&rdquo; but because their mental-model of how the system works and or fails was flawed.</p><p>As mentioned above:</p><blockquote><p>Every time a system surprises us, that is because our mental model is flawed and or information became stale.</p></blockquote><p>This is also true for reviews. If we are surprised by a suggestion to change the design or code, that is likely because our own mental-model isn’t aligned with the mental-model of the person which suggestion you are reviewing.</p><p>In my opinion, frequent architecture or design reviews, as well as active participation in merge request reviews are crucial, because this helps us to inform each-other about our mental-models and it makes it easier to get a feeling and understanding of how others form their mental-model.</p></div><div class=article-tags><a class="badge badge-light" href=/tags/resiliency/>resiliency</a>
<a class="badge badge-light" href=/tags/reliability/>reliability</a></div><div class="media author-card" itemscope itemtype=http://schema.org/Person><div class=media-body><h5 class=card-title itemprop=name><a href=https://cedi.dev/>Cedric Kienzler</a></h5><h6 class=card-subtitle>Senior Software Engineer - Azure Resiliency Engineering</h6><p class=card-text itemprop=description>My work primarily focuses on building, designing, and maintaining highly distributed systems at large scale</p><ul class=network-icon aria-hidden=true><li><a itemprop=sameAs href=https://github.com/cedi target=_blank rel=noopener><i class="fab fa-github"></i></a></li><li><a itemprop=sameAs href=https://twitter.com/c3di1 target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li><li><a itemprop=sameAs href=https://www.linkedin.com/in/cekienzl/ target=_blank rel=noopener><i class="fab fa-linkedin"></i></a></li><li><a itemprop=sameAs href=https://www.instagram.com/c3di1 target=_blank rel=noopener><i class="fab fa-instagram"></i></a></li><li><a itemprop=sameAs href="https://500px.com/p/c_kienzler_photograpy?view=photos" target=_blank rel=noopener><i class="fab fa-500px"></i></a></li></ul></div></div></div></article><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin=anonymous></script>
<script>hljs.initHighlightingOnLoad()</script><script>const search_index_filename="/index.json",i18n={placeholder:"Search...",results:"results found",no_results:"No results found"},content_type={post:"Posts",project:"Projects",publication:"Publications",talk:"Talks"}</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script>
<script src=/js/academia.min.9042a7388281f2f310b1e3f1fcd33ab3.js></script><div class=container><footer class=site-footer><div class=container><div class="row align-items-center"><div class="col-md-6 mb-4 mb-md-0"><p class=mb-0>Copyright © 2022 by Cedric Kienzler &#183;
Powered by
<a href=https://gethugothemes.com target=_blank rel=noopener>Gethugothemes</a></p></div><div class=col-md-6><ul class="list-inline network-icon text-right mb-0"><li class=list-inline-item><a href=https://github.com/cedi target=_blank rel=noopener title="Find me on GitHub"><i class="fab fa-github" aria-hidden=true></i></a></li><li class=list-inline-item><a href=https://twitter.com/c3di1 target=_blank rel=noopener title="Find me on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class=list-inline-item><a href=https://www.linkedin.com/in/cekienzl/ target=_blank rel=noopener title="Find me on LinkedIn"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=list-inline-item><a href=https://instagram.com/c3di1 target=_blank rel=noopener title="Find me on Instagram"><i class="fab fa-instagram" aria-hidden=true></i></a></li><li class=list-inline-item><a href="https://500px.com/p/c_kienzler_photograpy?view=photos" target=_blank rel=noopener title="Find me on 500px"><i class="fab fa-500px" aria-hidden=true></i></a></li></ul></div></div></div></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div></body></html>